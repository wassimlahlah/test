{% extends "dashbored.html" %}
{% block your_shops %}
<div class="tab-pane show active fade p-3" id="nav-your_shops" role="tabpanel">

   <div class="row">
      {% for shop in your_shops.items %}
      <div class="col-md-4">
         <div class="card bg-dark text-white shadow-lg border-0 rounded-lg text-center">
            <img src="{{ url_for('static', filename='thumbnail/' ~ shop.thumbnail) }}" 
                 alt="{{ shop.title }}"
                 style="width: 100%; height: 150px; object-fit: cover;"
                 class="card-img-top">
            <div class="card-body">
               <h5 class="card-title fw-bold">{{ shop.title }}</h5>
               <p class="card-text text-muted">{{ shop.content }}</p>
               <p class="card-text text-muted">{{ shop.prix }}</p>

            </div>
            <div class="m-auto">
              <a href="{{ url_for('app.update', shop_id=shop.id) }}" class="btn btn-info btn-sm m-3">Update</a>
              <!-- Bouton pour ouvrir le modal -->
              <button type="button" class="btn btn-danger" data-bs-toggle="modal" data-bs-target="#deletemodal{{ shop.id }}">
                Delete
              </button>
            </div>
         </div>
      </div>

      <!-- Delete Modal (unique par shop) -->
      <div class="modal fade text-dark" id="deletemodal{{ shop.id }}" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title ">Delete Shop</h5>
              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
              <p class="">Are you sure you want to delete <strong>{{ shop.title }}</strong>?</p>
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-secondary " data-bs-dismiss="modal">Cancel</button>
              <form action="{{ url_for('app.delete', shop_id=shop.id) }}" method="POST">
                <input type="submit" class="btn btn-danger" value="Delete">
              </form>
            </div>
          </div>
        </div>
      </div>
      {% endfor %}
   </div>
    <nav class="mt-3" aria-label="Page navigation">
       <ul class="pagination justify-content-end">
         {% for page_num in your_shops.iter_pages(left_edge=1, right_edge=1, left_current=1, right_current=2) %}
           {% if page_num %}
             {% if your_shops.page == page_num %}
               <li class="page-item active">
                 <a class="page-link pistachio-btn" href="{{ url_for('app.your_shops', page=page_num) }}">{{ page_num }}</a>
               </li>
             {% else %}
               <li class="page-item">
                 <a class="page-link pistachio-btn" href="{{ url_for('app.your_shops', page=page_num) }}">{{ page_num }}</a>
               </li>
             {% endif %}
           {% else %}
             <li class="page-item disabled pistachio-btn"><span class="page-link">â€¦</span></li>
           {% endif %}
         {% endfor %}
       </ul>
     </nav>
</div>

{% endblock your_shops %}